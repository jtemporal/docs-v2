---
title: Asynchronous Authorization
description: Learn how Auth for GenAI enables AI agents to asynchronously authorize users.
---

import VercelAsyncAuth from "/snippets/get-started/vercel-ai-next-js/async-auth.mdx";
import VercelNodeAsyncAuth from "/snippets/get-started/vercel-ai-node-js/async-auth.mdx";
import LangChainAsyncAuth from "/snippets/get-started/langchain-next-js/async-auth.mdx";

Auth for GenAI enables AI agents to asynchronously authorize users using the [Client-Initiated Backchannel Authentication Flow (CIBA)](https://auth0.com/docs/get-started/authentication-and-authorization-flow/client-initiated-backchannel-authentication-flow). AI agents can work in the background, only notifying the user when needed for critical actions.

When you add secure [human-in-the-loop approvals](https://sdk.vercel.ai/cookbook/next/human-in-the-loop) to your AI agent workflows, you can use Auth0 to request the user's permission to complete an authorization request. The AI agent can render [rich authorization data](https://auth0.com/docs/get-started/authentication-and-authorization-flow/client-initiated-backchannel-authentication-flow/user-authorization-with-ciba) in the consent prompt so the user knows exactly what they're authorizing.

By the end of this quickstart, you should have an AI agent integrated with the [Auth0 AI SDK](https://github.com/auth0-lab/auth0-ai-js) that can request to buy products from an online shop on the user's behalf.

## Prerequisites

Before getting started, make sure you have completed the following steps:

<Steps>
  <Step title="Create an Auth0 Account and a Dev Tenant">
    To continue with this quickstart, you need an Auth0 account and a Developer Tenant.
      <Columns cols={2}>
          <Card title="Create Account" icon="user-shield" iconType="solid" href="https://auth0.auth0.com/u/login/identifier?state=hKFo2SAwWU5ObEx4S2JyRzNjUTlmVFFia2s5LXMxT2pYTVZobaFur3VuaXZlcnNhbC1sb2dpbqN0aWTZIFhGQWJhLVR1V1dQWDdGUzhvdjY4WEsyQmg5Z3N1Q1NSo2NpZNkgekVZZnBvRnpVTUV6aWxoa0hpbGNXb05rckZmSjNoQUk" horizontal/>
        </Columns>
  </Step>
  <Step title="Create Application">
    Create and configure an Auth0 Application of type `Regular Web` to use with this quickstart.
    To learn more about Auth0 applications, read [Applications](https://auth0.com/docs/get-started/applications)

    <Columns cols={2}>
      <Card title="Create App" icon="android" iconType="solid" horizontal href="https://manage.auth0.com/dashboard" />
    </Columns>

  </Step>
  <Step title="Enable CIBA Grant">
    Enable the Token Exchange Grant for your Auth0 Application. Go to **Applications > [YourApplication] > Settings > Advanced > Grant Types** and enable the **Client Initiated Backchannel Authentication (CIBA)** grant type.
  </Step>

  <Step title="Enable Guardian Push">
    Enable Mutli-factor authentication (MFA) with Guardian Push Notifications for your Auth0 tenant.

    To learn more about MFA with Guardian, read the [Auth0 Guardian documentation](https://auth0.com/docs/secure/multi-factor-authentication/auth0-guardian)

  </Step>

  <Step title="Enroll your user to use Auth0 Guardian">
    To initiate a CIBA push request, the authorizing user must be enrolled in MFA using push notifications. To verify if the authorizing user is enrolled for MFA push notifications in the [Auth0 Dashboard](http://manage.auth0.com/), navigate to **User Management > Users** and click on the user.

    Under **Multi-Factor Authentication**, Auth0 lists the factors the user is enrolled in:

    <Frame>
      <img src="/img/user_enrolled_in_auth0_guardian.png" alt="User Enrolled in Auth0 Guardian" />
    </Frame>

    If the user is not enrolled, you can send an enrollment request by email:

    <Frame>
      <img src="/img/enroll_user_in_auth0_guardian.png" alt="Enable Guardian Push Screenshot" />
    </Frame>

  </Step>

  <Step title="OpenAI Platform">
    Set up an [OpenAI account and API key](https://platform.openai.com/docs/libraries#create-and-export-an-api-key)
  </Step>
</Steps>

## Pick your tech stack

<Tabs>
  <Tab
    title="LangGraph.js"
    icon="https://mintlify-assets.b-cdn.net/auth0/langchain.svg"
  >
    <LangChainAsyncAuth />
  </Tab>
  <Tab
    title="Vercel AI + Next.js"
    icon="https://mintlify-assets.b-cdn.net/auth0/vercel.svg"
  >
    <VercelAsyncAuth />
  </Tab>
  <Tab
    title="Vercel AI + Node.js"
    icon="https://mintlify-assets.b-cdn.net/auth0/vercel.svg"
  >
    <VercelNodeAsyncAuth />
  </Tab>
  <Tab
    title="Fast API"
    icon="https://mintlify-assets.b-cdn.net/auth0/FastAPI.svg"
  >
    Coming soon...
  </Tab>
</Tabs>

## Next steps

You have successfully added an authorization step to protect tool calling in asynchronous AI agents. For next steps:

- Learn more about the [Client-Initiated Backchannel Authentication Flow](https://auth0.com/docs/get-started/authentication-and-authorization-flow/client-initiated-backchannel-authentication-flow).
- Learn how to [Configure Rich Authorization Requests](https://auth0.com/docs/get-started/apis/configure-rich-authorization-requests).
- [Asynchronous Authorization docs](/ai/docs/intro/asynchronous-authorization).
